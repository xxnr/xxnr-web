<!doctype html>
<html ng-app="xxnr">
<head>
<meta charset="utf-8">
<title>结算</title>
    <link type="text/css" rel="stylesheet" href="css/style.css">
    <link type="text/css" rel="stylesheet" href="css/addAddress.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/angular.min.js"></script>
    <script src="js/commonConfig.js"></script>
    <script src="js/commonService.js"></script>
    <script src="js/remoteApiService.js"></script>
    <script src="js/commonDirectives.js"></script>
    <script src="js/payService.js"></script>
    <script src="js/shoppingCart/shoppingCartController.js"></script>
    <script src="js/jiesuan/jiesuanController.js"></script>
    <script src="js/login/loginController.js"></script>
<script>
    $('.header').ready(function(){
        $(".header").load("header.html");
    });
    $('.footer').ready(function(){
        $(".footer").load("footer.html");
    });
</script>
</head>
<body ng-controller="jiesuanController">
<div class="header"></div>
<div class="wrap nav" ng-controller="shoppingCartController">
	<h1 class="left logo"><a href="index.html">新新农人</a></h1>
	<ul class="left">
		<li><a href="index.html">首页</a></li>
		<li><a href="huafei.html">化肥专场</a></li>
		<li><a href="car.html">汽车专场</a></li>
		<li><a href="news.html">新农资讯</a></li>
		<!--<li><a href="#">新农论坛</a></li>-->
		<li><a href="company.html">公司简介</a></li>
	</ul>
    <div class="right buy">
        <a href="" ng-click="accessShoppingCart()"><em>&nbsp;</em>购物车（{{shoppingCartCount}}）</a>
    </div>
</div>

<div class="clear channel3 cart_box">
	<p class="guide">
		<a href="index.html">首页</a> ／ <a href="jiesuan.html">我的结算</a>
	</p>
	<div class="wrap checkout-steps">
		<p class="confirm-tit">
			<span class="left">确认收货信息</span>
			<a href="" ng-click="addNewAddress()" class="right">添加新地址</a>
		</p>
		<div class="consignee-cont">
			<ul>
				<li ng-repeat="contact in contacts">
					<div class="left name">
						<input type="radio" ng-checked='contact.selected' ng-model='contact.addressId' ng-click="selectAddress($index)"> {{contact.name}}
					</div>
					<div class="left address">
						{{contact.address}}
					</div>
					<div class="left tel">
						{{contact.phone}}
					</div>
					<div class="opt">
						<a href="" ng-click="editAddress($index)">编辑</a>
						<a href="" ng-click="deleteAddress($index)">删除</a>
					</div>
				</li>
			</ul>
		</div>
	</div>
	<div class="wrap clear checkout-steps">
		<p class="confirm-tit">
			<span class="left">选择支付方式</span>
		</p>
		<ul class="pay-style">
			<li><a href="#" class="current"><img src="images/pay1.png" alt=""></a></li>
			<!--<li><a href="#"><img src="images/pay2.png" alt=""></a></li>-->
			<!--<li><a href="#"><img src="images/pay3.png" alt=""></a></li>-->
			<!--<li><a href="#"><img src="images/pay4.png" alt=""></a></li>-->
		</ul>
	</div>
    <div  ng-controller="shoppingCartController">
        <div class="wrap">
            <div class="cart">
                <div class="cart-main">
                    <p class="confirm-tit">
                        <span class="left">确认订单信息</span>
                    </p>
                    <div class="cart-thead">
                        <div class="column t-goods t-goods2">商品信息</div>
                        <div class="column t-price">单价(元)</div>
                        <div class="column t-quantity">数量</div>
                        <div class="column t-sum">小计(元)</div>
                        <div class="column t-action">操作</div>
                    </div>
                    <div class="cart-list">
                        <div class="cart-item-list">
                            <div class="cart-tbody" ng-repeat="shop in shops">
                                <div class="shop">
                                    <span class="shop-txt">
                                            <a class="shop-name" href="" target="_blank" >{{shop.name}}</a>
                                    </span>
                                </div>
                                <div class="item-list">
                                    <div class="item-single item-item" ng-repeat="item in shop.items">
                                        <div class="item-form">
                                            <div class="cell p-goods p-goods2">
                                                <div class="goods-item">
                                                    <div class="item-msg">
                                                        <div class="p-img">
                                                            <a ng-href={{item.detailPageUrl}}>
                                                                <img ng-src={{item.thumbnailUrl}}>
                                                            </a>
                                                        </div>
                                                        <div class="p-name">
                                                            <a ng-href={{item.detailPageUrl}}>{{item.name}}</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="cell p-props-price">
                                                <p class="old">{{item.oldPrice}}元</p>
                                                <p class="now">{{item.nowPrice}}元</p>
                                                <p class="jifen">{{item.point}}积分抵价{{item.point}}元</p>
                                            </div>
                                            <div class="cell p-props-quantity">
                                                <div class="buy_box">
                                                    <div class="left buy_btn">
                                                        <a class="btn-reduce" href="" ng-click="reduce($parent.$index, $index)">-</a>
                                                        <a class="btn-add" href="" ng-click="add($parent.$index, $index)">+</a>
                                                        <input class="text" id="buy-num" onkeyup="value=value.replace(/[^\d]/g,'')" ng-model="item.buyCount" ng-change="buyCountChange($parent.$index, $index, item.buyCountOldValue, item.buyCount)" ng-Blur="submitChange(item.goodsId, item.buyCount)">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="cell p-sum">{{item.totalPrice}}</div>
                                            <div class="cell p-ops"><a class="cart-remove" href="" ng-click="deleteItem($parent.$index, $index)">删除</a></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="wrap options-box">
            <div class="price-total">
                <p><label>商品数量：</label><span>{{totalCount}}</span></p>
                <p><label>总价（不计运费）：</label><span class="total">{{totalPrice}}元</span></p>
                <p><label>已节省：</label><span>{{totalSaving}}元</span></p>
            </div>
            <div class="submit-btn"><a href="" ng-click="buyAll()">去结算</a></div>
        </div>
    </div>
</div>
<div class="footer"></div>
<div class="modify-address">
    <div id="D1" ng-show="showPop"></div>
    <div id="D3" ng-show="showModifyPop">
        <a ng-href="" ng-click='hideModifyPop()' id="close2" class="close"><img src="images/close.png" alt=""></a>
        <h1>修改地址</h1>
        <table>
            <tr>
                <td class="first-td" style="vertical-align:top;">请选择省<span>*</span></td>
                <td class="second-td">
                    <select name="" id="provin" ng-model="modifyAddress.province" ng-options="province as province.name for province in provinces" ng-change="getCityList()">
                    </select>
                    <select name="" id="city" ng-model="modifyAddress.city" ng-options="city as city.name for city in cities" ng-change="getCountryList()">
                    </select>
                    <select name="" id="county" ng-model="modifyAddress.country" ng-options="country as country.name for country in countries">
                    </select>
                    <span style="color: #999999" id="address_detail"></span>
                </td>
            </tr>
            <tr>
            <tr>
                <td class="first-td" style="vertical-align:top;">
                    地址详情信息<span>*</span>
                    <div class="s">(请填写详细的)</div>
                </td>
                <td class="second-td">
                    <textarea name=""  class="dizhi" ng-model="modifyAddress.detailAddress"></textarea>
                </td>
            </tr>
            <tr>
                <td class="first-td">邮政编码</td>
                <td class="second-td"><input type="text" value="" class="youbian" ng-model="modifyAddress.zipCode"></td>
            </tr>
            <tr>
                <td class="first-td">收货人姓名<span>*</span></td>
                <td class="second-td"><input type="text" class="shouhuoren" value="" ng-model="modifyAddress.receiptName"></td>
            </tr>
            <tr>
                <td class="first-td">手机号码<span>*</span></td>
                <td class="second-td">
                    <select name="" id="select1">
                        <option value="">中国大陆 +86</option>
                    </select>
                    <input type="text" class="mobile-num" value="" ng-model="modifyAddress.phone">
                </td>
            </tr>
            <tr>
                <td class="first-td">&nbsp;</td>
                <td class="second-td">
                    <input type="checkbox" name="" id="checkbox1" ng-checked="modifyAddress.isDefault" ng-model="modifyAddress.isDefault">
                    <label for="checkbox1">设为默认地址</label>
                </td>
            </tr>
            <tr>
                <td class="first-td">&nbsp;</td>
                <td class="second-td"><input type="submit" value="提交" class="tijiao" ng-click="submitAddressEdit()"></td>
            </tr>
        </table>
    </div>
    <div id="D4" ng-show="showAddPop">  <!-- 添加地址弹框结构 -->
        <a href="" ng-click='hideAddPop()' id="close3" class="close"><img src="images/close.png" alt=""></a>
        <h1>添加地址</h1>
        <table>
            <tr>
                <td class="first-td" style="vertical-align:top;">请选择省<span>*</span></td>
                <td class="second-td">
                    <select name="" id="provin" ng-model="modifyAddress.province" ng-options="province as province.name for province in provinces" ng-change="getCityList()">
                    </select>
                    <select name="" id="city" ng-model="modifyAddress.city" ng-options="city as city.name for city in cities" ng-change="getCountryList()">
                    </select>
                    <select name="" id="county" ng-model="modifyAddress.country" ng-options="country as country.name for country in countries">
                    </select>
                    <span style="color: #999999" id="address_detail"></span>
                </td>
            </tr>
            <tr>
            <tr>
                <td class="first-td" style="vertical-align:top;">
                    地址详情信息<span>*</span>
                    <div class="s">(请填写详细的)</div>
                </td>
                <td class="second-td">
                    <textarea name=""  class="dizhi" ng-model="modifyAddress.detailAddress"></textarea>
                </td>
            </tr>
            <tr>
                <td class="first-td">邮政编码</td>
                <td class="second-td"><input type="text" value="" class="youbian" ng-model="modifyAddress.zipCode"></td>
            </tr>
            <tr>
                <td class="first-td">收货人姓名<span>*</span></td>
                <td class="second-td"><input type="text" class="shouhuoren" value="" ng-model="modifyAddress.receiptName"></td>
            </tr>
            <tr>
                <td class="first-td">手机号码<span>*</span></td>
                <td class="second-td">
                    <select name="" id="select1">
                        <option value="">中国大陆 +86</option>
                    </select>
                    <input type="text" class="mobile-num" value="" ng-model="modifyAddress.phone">
                </td>
            </tr>
            <tr>
                <td class="first-td">&nbsp;</td>
                <td class="second-td">
                    <input type="checkbox" name="" id="checkbox1" ng-checked="modifyAddress.isDefault" ng-model="modifyAddress.isDefault">
                    <label for="checkbox1">设为默认地址</label>
                </td>
            </tr>
            <tr>
                <td class="first-td">&nbsp;</td>
                <td class="second-td"><input type="submit" value="提交" class="tijiao" ng-click="submitAddressAdd()"></td>
            </tr>
        </table>
    </div>
    <div id="D5" ng-show='showYunfeiPop'><div id="close5"><img src="images/close.png"/></div><img src="images/yunfei.png"/></div>
</div>
<div class="pop_pay_mask" ng-show="showPayPop"></div>
<div class="pop_content" ng-show="showPayPop">
    <div class="pop_head">
        <span class="left">确认付款</span>
    </div>
    <div class="pop_pay">
        <p for="" class="">请在支付页面中完成支付，付款完成前请不要关闭此窗口</p>
        <div class="pop_pay_btn">
            <div class="left">
                <a href="" class="btn" ng-click="finishPay()">支付完成</a>
            </div>
            <div class="right">
                <a href="" class="btn" ng-click="notFinishPay()">支付遇到问题</a>
            </div>
        </div>
    </div>
</div>
</body>
</html>
